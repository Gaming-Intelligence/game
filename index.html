<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Collector Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script>
        let screen_width;
        let screen_height;
        let coins = [];
        let score = 0;
        let base_radius = 20;

        function setup() {
        screen_width = windowWidth;
        screen_height = windowHeight;
        createCanvas(screen_width, screen_height);
        textSize(screen_height * 0.05);
        textAlign(LEFT, TOP);
        }

        function draw() {
        background(0); // BLACK

        // Add a new coin periodically
        if (frameCount % 20 === 0) { // Adjust the frequency of new coins
            let coinType = random(["gold", "silver", "bronze"]);
            coins.push(new Coin(coinType));
        }

        // Update and draw all coins
        for (let i = coins.length - 1; i >= 0; i--) {
            coins[i].update();
            coins[i].draw();
            
            // Remove collected coins or those that fall off the screen
            if (coins[i].collected || coins[i].y > screen_height + coins[i].radius) {
            coins.splice(i, 1);
            }
        }

        // Draw the score
        fill(255); // WHITE
        text(`Score: ${score}`, screen_width * 0.02, screen_height * 0.02);
        }

        function mousePressed() {
        for (let coin of coins) {
            if (coin.isCollected(mouseX, mouseY)) {
            coin.collected = true;
            score += coin.value; // Increase the score based on coin value
            }
        }
        }

        class Coin {
        constructor(coinType) {
            this.radius = base_radius * (screen_height / 600); // Scale radius based on screen height
            this.x = random(this.radius, screen_width - this.radius);
            this.y = -this.radius; // Start above the screen
            this.coinType = coinType;

            if (this.coinType === "gold") {
            this.color = color(255, 215, 0); // GOLD
            this.value = 5;
            this.speed = random(3, 6) * (screen_height / 600);
            } else if (this.coinType === "silver") {
            this.color = color(192, 192, 192); // SILVER
            this.value = 3;
            this.speed = random(5, 8) * (screen_height / 600);
            } else if (this.coinType === "bronze") {
            this.color = color(205, 127, 50); // BRONZE
            this.value = 1;
            this.speed = random(7, 10) * (screen_height / 600);
            }

            this.collected = false;
        }

        update() {
            this.y += this.speed; // Move the coin downwards
        }

        draw() {
            fill(this.color);
            noStroke();
            ellipse(this.x, this.y, this.radius * 2);
        }

        isCollected(mx, my) {
            let distance = dist(this.x, this.y, mx, my);
            return distance < this.radius;
        }
        }

        function windowResized() {
        screen_width = windowWidth;
        screen_height = windowHeight;
        resizeCanvas(screen_width, screen_height);
        }

    </script>
</body>
</html>
